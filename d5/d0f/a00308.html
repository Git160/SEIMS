<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>SEIMS: SEIMS 建模数据准备</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SEIMS
   &#160;<span id="projectnumber">2.0-beta</span>
   </div>
   <div id="projectbrief">Spatially Explicit Integrated Modeling System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Packages</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/d0f/a00308.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SEIMS 建模数据准备 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>prepared by Liang-Jun Zhu</p>
<p>First Release : 2015-6-20 v1.0</p>
<p>Revised date : 2016-5-31 v2.0 </p>
<hr/>
<p>流域过程模型是根据流域内基础地理信息数据、气象数据、水文数据等对流域产流、侵蚀、污染迁移等过程进行合理概化、模拟。</p>
<p>为了使模型模拟更接近真实流域过程，我们需要准备一系列建模数据，主要包括：**降水**、**气象**、**空间数据**（DEM、土地利用图、土壤类型图）、**管理措施数据**等。</p>
<p>接下来，分别对准备数据的搜集、整理加以介绍。</p>
<h1>目录</h1>
<ol type="1">
<li><a href="../../#1-降水数据">降水数据</a></li>
<li><a href="../../#2-气象数据">气象数据</a></li>
<li><a href="../../#3-空间数据">空间数据</a><ol type="a">
<li><a href="../../#31-dem-outlet-optional">DEM,Outlet</a></li>
<li><a href="../../#32-气象站点泰森多边形">气象站点泰森多边形</a></li>
</ol>
<ol type="a">
<li><a href="../../#33-土壤类别序列及属性查找表">土壤数据</a></li>
<li><a href="../../#34-土地利用数据及属性查找表">土地利用数据</a></li>
<li><a href="../../#35-植被覆盖数据及属性查找表">植被覆盖数据</a></li>
</ol>
</li>
</ol>
<h2>1. 降水数据</h2>
<ul>
<li>降水站点信息</li>
</ul>
<p>站点信息包括 站点编号(整型)、站点名称(字符串)、投影系X坐标及Y坐标、投影系ID(可设为0)、经纬度、椭球体ID(可设为0)以及高程，如下表所示，站点信息保存为txt格式，如<code>SEIMS/model_data/model_dianbu_30m_longterm/data_prepare/climate/Sites_P.txt</code>:</p>
<table class="doxtable">
<tr>
<th>StationID</th><th>Name</th><th>LocalX</th><th>LocalY</th><th>LocalPrjID</th><th>Lon</th><th>Lat</th><th>DatumID</th><th>Elevation  </th></tr>
<tr>
<td>62915310</td><td>GuanWan</td><td>39548201.84</td><td>3543440.687</td><td>0</td><td>117.525278</td><td>32.025556</td><td>0</td><td>43 </td></tr>
<tr>
<td>...</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
</table>
<ul>
<li>降水数据<ul>
<li>每个Sheet名对应一个<code>Sites_P.txt</code>内的站点名</li>
<li>每个Sheet按照月(col)*日(row)的二维表形式组织数据</li>
<li>降雨数据单位为毫米(mm)</li>
</ul>
</li>
</ul>
<blockquote class="doxtable">
<p>TODO: 可将目前这种EXCEL组织形式修改为txt格式 具体可参照SWAT降水数据的输入格式</p>
<p></p>
</blockquote>
<p><a href="../../#目录">返回目录</a></p>
<h2>2. 气象数据</h2>
<ul>
<li>气象站点信息</li>
</ul>
<p>格式与降水站点一致，如<code>SEIMS/model_data/model_dianbu_30m_longterm/data_prepare/climate/Sites_M.txt</code>:</p>
<table class="doxtable">
<tr>
<th>StationID</th><th>Name</th><th>LocalX</th><th>LocalY</th><th>LocalPrjID</th><th>Lon</th><th>Lat</th><th>DatumID</th><th>Elevation  </th></tr>
<tr>
<td>58321</td><td>hefei</td><td>39535576.056</td><td>3536052.03009</td><td>0</td><td>117.23</td><td>31.87</td><td>0</td><td>20 </td></tr>
<tr>
<td>...</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
</table>
<ul>
<li>气象数据(**日值**)<ul>
<li>StationID: 必需，站点编号(整型)</li>
<li>Y, M, D : 必需，年/月/日</li>
<li>TMAX : 必需，最高气温(deg C)</li>
<li>TMIN : 必需，最低气温(deg C)</li>
<li>TMEAN : 可选，平均气温(deg C)，缺失情况下，由(TMAX+TMIN)/2计算</li>
<li>RM : 必需，相对湿度(%)</li>
<li>WS : 必需，风速(m/s)</li>
<li>SR/SSD : 二选一，太阳辐射(MJ/m2/day)/日照时数(h)</li>
<li>PET : 可选，蒸散发(mm)</li>
</ul>
</li>
</ul>
<blockquote class="doxtable">
<p>1.气象数据中各属性列的前后顺序没有固定要求，随意排列即可！ 2.**表头必须要有且与上述名称一致**，</p>
<p></p>
</blockquote>
<p>保存为text格式文件，如<code>meteorology_dianbu_daily.txt</code>，下表：</p>
<table class="doxtable">
<tr>
<th>StationID</th><th>Y</th><th>M</th><th>D</th><th>TMEAN</th><th>TMAX</th><th>TMIN</th><th>RM</th><th>WS</th><th>SSD  </th></tr>
<tr>
<td>58321</td><td>2014</td><td>1</td><td>1</td><td>5.6</td><td>16.3</td><td>-2.4</td><td>56.0</td><td>1.4</td><td>7.4 </td></tr>
<tr>
<td>58321</td><td>2014</td><td>1</td><td>2</td><td>7.5</td><td>17.3</td><td>-0.6</td><td>58.0</td><td>1.2</td><td>6.9 </td></tr>
</table>
<p>|...|||||||||</p>
<p><a href="../../#目录">返回目录</a></p>
<h2>3. 空间数据</h2>
<blockquote class="doxtable">
<p>1.所有空间数据的分辨率及空间投影坐标系必须一致！</p>
<p>2.数据准备阶段，各个数据的EXTENT可以不一致，但都必须大于流域边界</p>
<p></p>
</blockquote>
<h3>3.1 DEM, Outlet (Optional)</h3>
<p>DEM是最基础也是最重要的空间数据，SEIMS模型调用<a href="http://hydrology.usu.edu/taudem/taudem5/">TauDEM</a>实现流域分割、地形参数提取。</p>
<p>流域出口Shapefile数据为可选，缺省状态下，以当前区域汇流累积量最大值的点作为流域出口。</p>
<p><a href="../../#目录">返回目录</a></p>
<h3>3.2 气象站点泰森多边形</h3>
<p>气象站点泰森多边形用于判断研究区内用到的降水站点、气象站点。准备数据为ESRI Shapefile格式，如<code>SEIMS/model_data/model_dianbu_30m_longterm/data_prepare/spatial</code>内的<code>Preci_dianbu_Vor.shp</code>和<code>Metero_hefei_Vor.shp</code>。</p>
<blockquote class="doxtable">
<p>TODO: 准备泰森多边形的意义仅在于此，能否考虑其他更加便捷的方式确定研究区所用的气象数据站点？</p>
<p></p>
</blockquote>
<p><a href="../../#目录">返回目录</a></p>
<h3>3.3 土壤类别序列及属性查找表</h3>
<p>土壤类别序列图（如<code>soil_SEQN.tif</code>）为该研究区内土壤属性不同的类型图，也即**不一定要求与土壤类型完全一致**。</p>
<p>比如，研究区内有 A、B、C三种类型的土壤，但是由于地形等原因，土壤类型内属性差异较大，因此，可以根据一些条件制作出A1、A2、B1、B2、B3、C六种土壤类别序列图。</p>
<p>类别序列以整型数字表示，必需的土壤属性由一个属性查找表提供（如<code>soil_properties_lookup.txt</code>），其基本格式如下：</p>
<ul>
<li>土壤类别序列的属性查找表部分属性介绍：<ul>
<li>SEQN: 必需，类别序列编号(整型)</li>
<li>NAME: 必需，类别名称(字符串)</li>
<li>NLAYERS: 必需，土壤层数</li>
<li>SOL_Z: 必需， 土层底部至土壤表面厚度(mm), 比如: 100,400,800</li>
<li>SOL_OM: 必需，有机质含量(%)</li>
<li>SOL_CLAY: 必需，美国制粘粒含量(%), &lt; 0.002 mm</li>
<li>SOL_SILT: 必需，美国制粉粒含量(%), 0.002 ~ 0.05 mm</li>
<li>SOL_SAND: 必需，美国制砂粒含量(%), 0.05 ~ 2 mm</li>
<li>SOL_ROCK: 必需，美国制石块含量(%), &gt; 2 mm</li>
<li>**可选属性列表略**</li>
</ul>
</li>
</ul>
<blockquote class="doxtable">
<p>1.NLAYERS对不同土壤允许不同</p>
<p>2.对于多层属性数据，土层自上而下属性间以逗号(,)分隔</p>
<p>3.可选属性缺省状态下，由必需属性通过经验公式计算得到</p>
<p>4.土壤初始化学参数由经验公式计算得到</p>
<p>5.与日值气象数据准备一样，各属性列的排列顺序可以随意，但必需包含表头且属性列名称与上述介绍一致。</p>
<p></p>
</blockquote>
<p>下表为简单示例：</p>
<table class="doxtable">
<tr>
<th>SEQN</th><th>SNAM</th><th>NLAYERS</th><th>SOL_ZMX</th><th>SOL_Z</th><th>SOL_BD</th><th>SOL_OM</th><th>CLAY</th><th>SILT</th><th>SAND</th><th>ROCK  </th></tr>
<tr>
<td>1</td><td>Chengbaitutian</td><td>4</td><td>180</td><td>130,230,520,1000</td><td>1.19,-9999,-9999,-9999</td><td>1.66,0.57,0.36,0.43</td><td>14.22,16.9,52.32,50.04</td><td>53.59,50.6,44.88,47.06</td><td>32.19,32.5,2.8,2.9</td><td>0,0,0,0 </td></tr>
<tr>
<td>2</td><td>Huangbaitutian_h</td><td>2</td><td>230</td><td>140,230</td><td>-9999,-9999</td><td>1.18,0.76</td><td>15.64,16.95</td><td>52.62,51.93</td><td>31.74,31.12</td><td>0,0 </td></tr>
<tr>
<td>3</td><td>Huangbaitutian_s</td><td>3</td><td>230</td><td>160,290,1000</td><td>1.23,1.58,-9999</td><td>1.65,0.55,0.79</td><td>25.92,23.66,23.32</td><td>51.07,50.72,75.14</td><td>23.01,25.62,1.54</td><td>0,0,0 </td></tr>
</table>
<p><a href="../../#目录">返回目录</a></p>
<h3>3.4 土地利用数据及属性查找表</h3>
<p>SEIMS采用SWAT模型的土地利用编码及属性查找表(<code>SEIMS\database\LanduseLookup.txt</code>)。</p>
<p>因此，需要将土地利用图：</p>
<ul>
<li>土地利用代码 -&gt; SWAT土地利用代码</li>
<li>矢量或栅格 -&gt; 与DEM空间分辨率一致</li>
</ul>
<p><a href="../../#目录">返回目录</a></p>
<h3>3.5 植被覆盖数据及属性查找表</h3>
<p>植被覆盖数据（Crop）是进行生态过程模拟的关键输入，目前SEIMS模型根据土地利用确定植被覆盖数据，并利用SWAT数据库查表（<code>CropLookup.txt</code>）得到属性信息。</p>
<blockquote class="doxtable">
<p>TODO: 应当考虑植被覆盖数据的空间数据输入。</p>
<p></p>
</blockquote>
<p>至此，SEIMS模型所需准备数据就完成了，下一步，可以[运行数据预处理程序](Data-preprocess)，并将所有数据导入MongoDB数据库，以供SEIMS运行调用。</p>
<p><a href="../../#目录">返回目录</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Jul 18 2017 15:34:33 for SEIMS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
